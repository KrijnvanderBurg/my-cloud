---
# pfSense HA Configuration Playbook
# Configures CARP, firewall rules, and routing on pfSense NVA pair
# Run via jumpbox as SSH proxy

- name: Configure pfSense Primary NVA
  hosts: nva_primary
  gather_facts: false
  vars:
    pfsense_config_path: /cf/conf/config.xml

  tasks:
    - name: Placeholder - Configure CARP VIP
      debug:
        msg: "Configure CARP virtual IP {{ lb_ip }} on {{ inventory_hostname }}"

    - name: Placeholder - Configure HA sync
      debug:
        msg: "Configure HA sync to peer {{ peer_ip }}"

    - name: Placeholder - Configure firewall rules
      debug:
        msg: "Configure firewall rules for hub-spoke traffic"

    - name: Placeholder - Configure NAT
      debug:
        msg: "Configure outbound NAT for spoke networks"

- name: Configure pfSense Secondary NVA
  hosts: nva_secondary
  gather_facts: false
  vars:
    pfsense_config_path: /cf/conf/config.xml

  tasks:
    - name: Placeholder - Configure CARP VIP (backup)
      debug:
        msg: "Configure CARP virtual IP {{ lb_ip }} as backup on {{ inventory_hostname }}"

    - name: Placeholder - Configure HA sync (secondary)
      debug:
        msg: "Configure HA sync from primary {{ peer_ip }}"
