---
# 02-openclaw-app: Application deployment and configuration

- name: Deploy OpenClaw application configuration
  ansible.builtin.template:
    src: openclaw.conf.j2
    dest: "{{ openclaw_install_dir }}/openclaw.conf"
    owner: "{{ openclaw_user }}"
    group: "{{ openclaw_group }}"
    mode: "0640"
  notify: Restart OpenClaw

- name: Deploy OpenClaw systemd service
  ansible.builtin.template:
    src: openclaw.service.j2
    dest: /etc/systemd/system/openclaw.service
    owner: root
    group: root
    mode: "0644"
  notify:
    - Reload systemd
    - Restart OpenClaw

- name: Ensure OpenClaw service is running
  ansible.builtin.systemd:
    name: openclaw
    state: started
    enabled: true
    daemon_reload: true
